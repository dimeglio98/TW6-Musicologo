<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Lista Canzoni</title>
    <script>
      async function caricaCanzoni() {
        const url = "http://127.0.0.1:5000/get/album/abc13";

        const response = await fetch(url);

        if (response.status == 200) {
          response.json().then((data) =>{
            
            const table = document.createElement('table');

            const headerRow = document.createElement('tr');
            Object.keys(data[0]).forEach(key => {
                const th = document.createElement('th');
                th.appendChild(document.createTextNode(key));
                headerRow.appendChild(th);
            });
            table.appendChild(headerRow);

            data.forEach(item => {
                const row = document.createElement('tr');
                Object.values(item).forEach(value => {
                    const td = document.createElement('td');
                    td.appendChild(document.createTextNode(value));
                    row.appendChild(td);
                });
                table.appendChild(row);
            });

            document.body.appendChild(table);
            /*var table = document.getElementById("tabellacanzoni")

            data.forEach((element) => {
                console.log(element);
                row = table.insertRow();
                columns = []
                for (var i = 0; i < 6; i++) {
                    columns[i] = row.insertCell
                }
                columns[0].innerHTML = element.posizione
                columns[1].innerHTML = element.name
                columns[2].innerHTML = element.artist
                columns[3].innerHTML = element.house
                columns[4].innerHTML = element.airings
                columns[5].innerHTML = element.link
                console.log(columns)

            })*/
          }
            
          );
        } else {
          alert("Errore nel caricamento dei dati!");
        }
      }
    </script>
  </head>
  <body
    style="
      display: flex;
      width: 95vw;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    "
    onload="caricaCanzoni()"
  >
    <iframe src="header.html" seamless></iframe>

    <h2>Album: Abc13</h2>

    
  </body>
</html>
